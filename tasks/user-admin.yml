---
-
  name: Add 'admin' Group
  group: name=admin state=present
-
  name: Add 'admin group' to Sudoers file
  become: true
  lineinfile: 
    dest: /etc/sudoers
    regexp: '^%ADMIN ALL\='
    line: 'ADMIN ALL=(ALL) NOPASSWD:ALL'
    state: present
    validate: 'visudo -cf %s'  
-
  name: Add admin user - 'colin'
  user:
    name: colin
#    password: {{ user_pass }}
    shell: /bin/bash
    groups: admin
    append: yes
-
  name: Add 'colin' ssh pub key
  tags: always
  authorized_key:
    user: colin
    key: "ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIBQdxa5ODGFckOIv2MQ65zL9l27YQvJwjZwbWaJ+0rv4 colin FarmNet.Lab testing Key"
    state: present
-
  name: Add 'colin' Sudoers File
  tags: always
  become: true
  copy:
    src: files/colin
    dest: /etc/sudoers.d/colin
    owner: root
    group: root
    mode: 0440